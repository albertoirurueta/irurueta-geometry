<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>Transformation2D.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">com.irurueta:irurueta-geometry</a> &gt; <a href="index.source.html" class="el_package">com.irurueta.geometry</a> &gt; <span class="el_source">Transformation2D.java</span></div><h1>Transformation2D.java</h1><pre class="source lang-java linenums">/*
 * @file
 * This file contains implementation of
 * com.irurueta.geometry.Transformation2D
 *
 * @author Alberto Irurueta (alberto@irurueta.com)
 * @date October 25, 2012
 */
package com.irurueta.geometry;

import com.irurueta.algebra.AlgebraException;
import com.irurueta.algebra.Matrix;

import java.util.ArrayList;
import java.util.List;

/**
 * This class performs transformations on 2D space.
 * Transformations can be applied to any 2D geometric figure.
 */
public abstract class Transformation2D {

    /**
     * Empty constructor.
     */
<span class="fc" id="L26">    protected Transformation2D() {</span>
<span class="fc" id="L27">    }</span>

    /**
     * Transforms provided point using this transformation.
     *
     * @param inputPoint point to be transformed.
     * @return transformed point.
     */
    public Point2D transformAndReturnNew(final Point2D inputPoint) {
<span class="fc" id="L36">        final var outputPoint = Point2D.create();</span>
<span class="fc" id="L37">        transform(inputPoint, outputPoint);</span>
<span class="fc" id="L38">        return outputPoint;</span>
    }

    /**
     * Transforms and updates provided point.
     *
     * @param point point to be transformed and updated.
     */
    public void transform(final Point2D point) {
<span class="fc" id="L47">        transform(point, point);</span>
<span class="fc" id="L48">    }</span>

    /**
     * Transforms input point using this transformation and stores the result in
     * provided output points.
     *
     * @param inputPoint  point to be transformed.
     * @param outputPoint instance where transformed point data will be stored.
     */
    public abstract void transform(final Point2D inputPoint, final Point2D outputPoint);

    /**
     * Transforms provided list of points using this transformation and returns
     * a new one.
     *
     * @param inputPoints points to be transformed.
     * @return transformed points.
     */
    public List&lt;Point2D&gt; transformPointsAndReturnNew(final List&lt;Point2D&gt; inputPoints) {
<span class="fc" id="L67">        final var outputPoints = new ArrayList&lt;Point2D&gt;(inputPoints.size());</span>
<span class="fc" id="L68">        transformPoints(inputPoints, outputPoints);</span>
<span class="fc" id="L69">        return outputPoints;</span>
    }

    /**
     * Transforms provided list of points using this transformation and stores
     * the result in provided output list of points.
     * Notice that any previous content in output list will be removed when
     * calling this method.
     *
     * @param inputPoints  points to be transformed.
     * @param outputPoints transformed points.
     */
    public void transformPoints(final List&lt;Point2D&gt; inputPoints, final List&lt;Point2D&gt; outputPoints) {

<span class="fc" id="L83">        outputPoints.clear();</span>
<span class="fc bfc" id="L84" title="All 2 branches covered.">        for (final var point : inputPoints) {</span>
<span class="fc" id="L85">            outputPoints.add(Transformation2D.this.transformAndReturnNew(point));</span>
<span class="fc" id="L86">        }</span>
<span class="fc" id="L87">    }</span>

    /**
     * Transforms provided list of points using this transformation and
     * overwriting their previous values.
     *
     * @param points points to be transformed and overwritten.
     */
    public void transformAndOverwritePoints(final List&lt;Point2D&gt; points) {
<span class="fc bfc" id="L96" title="All 2 branches covered.">        for (final var point : points) {</span>
<span class="fc" id="L97">            transform(point, point);</span>
<span class="fc" id="L98">        }</span>
<span class="fc" id="L99">    }</span>

    /**
     * Transforms a conic using this transformation and returns a new one.
     *
     * @param inputConic conic to be transformed.
     * @return transformed conic.
     * @throws NonSymmetricMatrixException raised if due to numerical precision
     *                                     the resulting output conic matrix is not considered to be symmetric.
     * @throws AlgebraException            raised if transform cannot be computed because of
     *                                     numerical instabilities.
     */
    public Conic transformAndReturnNew(final Conic inputConic) throws NonSymmetricMatrixException, AlgebraException {
<span class="fc" id="L112">        final var outputConic = new Conic();</span>
<span class="fc" id="L113">        transform(inputConic, outputConic);</span>
<span class="fc" id="L114">        return outputConic;</span>
    }

    /**
     * Transforms and updates provided conic.
     *
     * @param conic conic to be transformed.
     * @throws NonSymmetricMatrixException raised if due to numerical precision
     *                                     the resulting conic matrix is not considered to be symmetric.
     * @throws AlgebraException            raised if transform cannot be computed because of
     *                                     numerical instabilities.
     */
    public void transform(final Conic conic) throws NonSymmetricMatrixException, AlgebraException {
<span class="fc" id="L127">        transform(conic, conic);</span>
<span class="fc" id="L128">    }</span>

    /**
     * Transforms a conic using this transformation and stores the result into
     * provided output conic.
     *
     * @param inputConic  conic to be transformed.
     * @param outputConic instance where data of transformed conic will be
     *                    stored.
     * @throws NonSymmetricMatrixException raised if due to numerical precision
     *                                     the resulting output conic matrix is not considered to be symmetric.
     * @throws AlgebraException            raised if transform cannot be computed because of
     *                                     numerical instabilities.
     */
    public abstract void transform(final Conic inputConic, final Conic outputConic) throws NonSymmetricMatrixException,
            AlgebraException;

    /**
     * Transforms a dual conic using this transformation and returns a new one.
     *
     * @param inputDualConic dual conic to be transformed.
     * @return transformed dual conic.
     * @throws NonSymmetricMatrixException raised if due to numerical precision
     *                                     the resulting output conic matrix is not considered to be symmetric.
     * @throws AlgebraException            raised if transform cannot be computed because
     *                                     of numerical instabilities.
     */
    public DualConic transformAndReturnNew(final DualConic inputDualConic) throws NonSymmetricMatrixException,
            AlgebraException {
<span class="fc" id="L157">        final var outputDualConic = new DualConic();</span>
<span class="fc" id="L158">        transform(inputDualConic, outputDualConic);</span>
<span class="fc" id="L159">        return outputDualConic;</span>
    }

    /**
     * Transforms and updates a dual conic using this transformation.
     *
     * @param dualConic dual conic to be transformed.
     * @throws NonSymmetricMatrixException raised if due to numerical precision
     *                                     the resulting conic matrix is not considered to be symmetric.
     * @throws AlgebraException            raised if transform cannot be computed because
     *                                     of numerical instabilities.
     */
    public void transform(final DualConic dualConic) throws NonSymmetricMatrixException, AlgebraException {
<span class="fc" id="L172">        transform(dualConic, dualConic);</span>
<span class="fc" id="L173">    }</span>

    /**
     * Transforms a dual conic using this transformation and stores the result
     * into provided output dual conic.
     *
     * @param inputDualConic  dual conic to be transformed.
     * @param outputDualConic instance where data of transformed dual conic will
     *                        be stored.
     * @throws NonSymmetricMatrixException raised if due to numerical precision
     *                                     the resulting output dual conic matrix is not considered to be symmetric.
     * @throws AlgebraException            Raised if transform cannot be computed because
     *                                     of numerical instabilities.
     */
    public abstract void transform(final DualConic inputDualConic, final DualConic outputDualConic)
            throws NonSymmetricMatrixException, AlgebraException;

    /**
     * Transforms provided line using this transformation and returns a new one.
     *
     * @param inputLine line to be transformed.
     * @return transformed line.
     * @throws AlgebraException raised if transform cannot be computed because
     *                          of numerical instabilities.
     */
    public Line2D transformAndReturnNew(final Line2D inputLine) throws AlgebraException {
<span class="fc" id="L199">        final var outputLine = new Line2D();</span>
<span class="fc" id="L200">        transform(inputLine, outputLine);</span>
<span class="fc" id="L201">        return outputLine;</span>
    }

    /**
     * Transforms and updates provided line using this transformation.
     *
     * @param line line to be transformed and updated.
     * @throws AlgebraException if transform cannot be computed because of
     *                          numerical instabilities.
     */
    public void transform(final Line2D line) throws AlgebraException {
<span class="fc" id="L212">        transform(line, line);</span>
<span class="fc" id="L213">    }</span>

    /**
     * Transforms provided input line using this transformation and stores the
     * result into provided output line instance.
     *
     * @param inputLine  line to be transformed.
     * @param outputLine instance where data of transformed line will be stored.
     * @throws AlgebraException Raised if transform cannot be computed because
     *                          of numerical instabilities.
     */
    public abstract void transform(final Line2D inputLine, final Line2D outputLine) throws AlgebraException;

    /**
     * Transforms provided list of lines using this transformation and returns
     * a new one.
     *
     * @param inputLines lines to be transformed.
     * @return transformed lines.
     * @throws AlgebraException raised if transform cannot be computed because
     *                          of numerical instabilities.
     */
    public List&lt;Line2D&gt; transformLinesAndReturnNew(final List&lt;Line2D&gt; inputLines) throws AlgebraException {
<span class="fc" id="L236">        final var outputLines = new ArrayList&lt;Line2D&gt;(inputLines.size());</span>
<span class="fc" id="L237">        transformLines(inputLines, outputLines);</span>
<span class="fc" id="L238">        return outputLines;</span>
    }

    /**
     * Transforms provided list of lines using this transformation and stores
     * the result in provided output list of lines.
     * Notice that any previous content in output list will be removed when
     * calling this method.
     *
     * @param inputLines  lines to be transformed.
     * @param outputLines transformed lines.
     * @throws AlgebraException raised if transform cannot be computed because
     *                          of numerical instabilities.
     */
    public void transformLines(final List&lt;Line2D&gt; inputLines, final List&lt;Line2D&gt; outputLines) throws AlgebraException {
<span class="fc" id="L253">        outputLines.clear();</span>
<span class="fc bfc" id="L254" title="All 2 branches covered.">        for (final var line : inputLines) {</span>
<span class="fc" id="L255">            outputLines.add(Transformation2D.this.transformAndReturnNew(line));</span>
<span class="fc" id="L256">        }</span>
<span class="fc" id="L257">    }</span>

    /**
     * Transforms provided list of lines using this transformation and
     * overwriting their previous values.
     *
     * @param lines lines to be transformed and overwritten.
     * @throws AlgebraException raised if transform cannot be computed because
     *                          of numerical instabilities.
     */
    public void transformAndOverwriteLines(final List&lt;Line2D&gt; lines) throws AlgebraException {
<span class="fc bfc" id="L268" title="All 2 branches covered.">        for (final var line : lines) {</span>
<span class="fc" id="L269">            transform(line, line);</span>
<span class="fc" id="L270">        }</span>
<span class="fc" id="L271">    }</span>

    /**
     * Transforms provided polygon using this transformation and returns a new
     * one.
     *
     * @param inputPolygon polygon to be transformed.
     * @return Transformed polygon.
     */
    public Polygon2D transformAndReturnNew(final Polygon2D inputPolygon) {
<span class="fc" id="L281">        final var outVertices = transformPointsAndReturnNew(inputPolygon.getVertices());</span>
        try {
<span class="fc" id="L283">            return new Polygon2D(outVertices);</span>
<span class="nc" id="L284">        } catch (final NotEnoughVerticesException ignore) {</span>
            // this will never happen because all existing polygons have enough
            // vertices
<span class="nc" id="L287">            return null;</span>
        }
    }

    /**
     * Transforms and updates provided polygon using this transformation.
     *
     * @param polygon polygon to be transformed.
     */
    public void transform(final Polygon2D polygon) {
<span class="fc" id="L297">        transformAndOverwritePoints(polygon.getVertices());</span>
<span class="fc" id="L298">    }</span>

    /**
     * Transforms provided input polygon using this transformation and stores
     * the result into provided output polygon instance.
     *
     * @param inputPolygon  polygon to be transformed.
     * @param outputPolygon instance where transformed polygon data will be
     *                      stored.
     */
    public void transform(final Polygon2D inputPolygon, final Polygon2D outputPolygon) {
        try {
<span class="fc" id="L310">            outputPolygon.setVertices(transformPointsAndReturnNew(inputPolygon.getVertices()));</span>
<span class="nc" id="L311">        } catch (final NotEnoughVerticesException ignore) {</span>
            // this will never happen because all existing polygons have enough
            // vertices
<span class="fc" id="L314">        }</span>
<span class="fc" id="L315">    }</span>

    /**
     * Transforms provided triangle using this transformation and returns a new
     * one.
     *
     * @param inputTriangle triangle to be transformed.
     * @return transformed triangle.
     */
    public Triangle2D transformAndReturnNew(final Triangle2D inputTriangle) {
<span class="fc" id="L325">        final var vertex1 = Transformation2D.this.transformAndReturnNew(inputTriangle.getVertex1());</span>
<span class="fc" id="L326">        final var vertex2 = Transformation2D.this.transformAndReturnNew(inputTriangle.getVertex2());</span>
<span class="fc" id="L327">        final var vertex3 = Transformation2D.this.transformAndReturnNew(inputTriangle.getVertex3());</span>
<span class="fc" id="L328">        return new Triangle2D(vertex1, vertex2, vertex3);</span>
    }

    /**
     * Transforms and updates provided input triangle using this transformation.
     *
     * @param triangle triangle to be transformed.
     */
    public void transform(final Triangle2D triangle) {
<span class="fc" id="L337">        transform(triangle, triangle);</span>
<span class="fc" id="L338">    }</span>

    /**
     * Transforms provided input triangle using this transformation and stores
     * the result into provided output triangle instance.
     *
     * @param inputTriangle  triangle to be transformed.
     * @param outputTriangle instance where transformed triangle data will be
     *                       stored
     */
    public void transform(final Triangle2D inputTriangle, final Triangle2D outputTriangle) {
<span class="fc" id="L349">        outputTriangle.setVertex1(transformAndReturnNew(inputTriangle.getVertex1()));</span>
<span class="fc" id="L350">        outputTriangle.setVertex2(transformAndReturnNew(inputTriangle.getVertex2()));</span>
<span class="fc" id="L351">        outputTriangle.setVertex3(transformAndReturnNew(inputTriangle.getVertex3()));</span>
<span class="fc" id="L352">    }</span>

    /**
     * Represents this transformation as a 3x3 matrix.
     * A point can be transformed as T * p, where T is the transformation matrix
     * and p is a point expressed as an homogeneous vector.
     *
     * @return This transformation in matrix form.
     */
    public abstract Matrix asMatrix();

    /**
     * Represents this transformation as a 3x3 matrix and stores the result in
     * provided instance.
     *
     * @param m Instance where transformation matrix will be stored.
     * @throws IllegalArgumentException Raised if provided instance is not a 3x3
     *                                  matrix.
     */
    public abstract void asMatrix(final Matrix m);
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.13.202504020838</span></div></body></html>