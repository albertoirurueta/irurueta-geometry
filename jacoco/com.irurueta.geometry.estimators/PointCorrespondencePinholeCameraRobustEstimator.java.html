<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>PointCorrespondencePinholeCameraRobustEstimator.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">com.irurueta:irurueta-geometry</a> &gt; <a href="index.source.html" class="el_package">com.irurueta.geometry.estimators</a> &gt; <span class="el_source">PointCorrespondencePinholeCameraRobustEstimator.java</span></div><h1>PointCorrespondencePinholeCameraRobustEstimator.java</h1><pre class="source lang-java linenums">/*
 * Copyright (C) 2015 Alberto Irurueta Carro (alberto@irurueta.com)
 *
 * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *         http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
package com.irurueta.geometry.estimators;

import com.irurueta.geometry.PinholeCamera;
import com.irurueta.geometry.PinholeCameraIntrinsicParameters;
import com.irurueta.geometry.Point2D;
import com.irurueta.geometry.Point3D;
import com.irurueta.geometry.refiners.DecomposedPointCorrespondencePinholeCameraRefiner;
import com.irurueta.geometry.refiners.NonDecomposedPointCorrespondencePinholeCameraRefiner;
import com.irurueta.numerical.robust.InliersData;
import com.irurueta.numerical.robust.RobustEstimatorMethod;

import java.util.List;

/**
 * This is an abstract class for algorithms to robustly find the best pinhole
 * camera for collections of matched 3D/2D points.
 * Implementations of this class should be able to detect and discard outliers
 * in order to find the best solution.
 */
@SuppressWarnings(&quot;DuplicatedCode&quot;)
public abstract class PointCorrespondencePinholeCameraRobustEstimator extends PinholeCameraRobustEstimator {

    /**
     * Minimum number of required point correspondences to estimate a pinhole
     * camera.
     */
    public static final int MIN_NUMBER_OF_POINT_CORRESPONDENCES = 6;

    /**
     * Indicates if by default point correspondences for each picked subset of
     * samples is normalized to increase the accuracy of the estimation.
     */
    public static final boolean DEFAULT_NORMALIZE_SUBSET_POINT_CORRESPONDENCES = true;

    /**
     * Default robust estimator method when none is provided.
     */
<span class="fc" id="L53">    public static final RobustEstimatorMethod DEFAULT_ROBUST_METHOD = RobustEstimatorMethod.PROMEDS;</span>

    /**
     * List of matched 3D points.
     */
    protected List&lt;Point3D&gt; points3D;

    /**
     * List of matched 2D points.
     */
    protected List&lt;Point2D&gt; points2D;

    /**
     * Indicates if each picked subset point correspondences are normalized to
     * increase the accuracy of the estimation.
     */
    protected boolean normalizeSubsetPointCorrespondences;

    /**
     * Constructor.
     */
    protected PointCorrespondencePinholeCameraRobustEstimator() {
<span class="fc" id="L75">        super();</span>
<span class="fc" id="L76">        normalizeSubsetPointCorrespondences = DEFAULT_NORMALIZE_SUBSET_POINT_CORRESPONDENCES;</span>
<span class="fc" id="L77">    }</span>

    /**
     * Constructor with lists of points to be used to estimate a pinhole camera.
     * Points in the lists located at the same position are considered to be
     * matched. Hence, both lists must have the same size, and their size must
     * be greater or equal than MIN_NUMBER_OF_POINT_CORRESPONDENCES (6 points).
     *
     * @param points3D list of 3D points used to estimate a pinhole camera.
     * @param points2D list of corresponding projected 2D points used to
     *                 estimate a pinhole camera.
     * @throws IllegalArgumentException if provided lists of points don't have
     *                                  the same size or their size is smaller than required minimum size
     *                                  (6 correspondences).
     */
    protected PointCorrespondencePinholeCameraRobustEstimator(
            final List&lt;Point3D&gt; points3D, final List&lt;Point2D&gt; points2D) {
<span class="fc" id="L94">        super();</span>
<span class="fc" id="L95">        normalizeSubsetPointCorrespondences = DEFAULT_NORMALIZE_SUBSET_POINT_CORRESPONDENCES;</span>
<span class="fc" id="L96">        internalSetPoints(points3D, points2D);</span>
<span class="fc" id="L97">    }</span>

    /**
     * Constructor with listener.
     *
     * @param listener listener to be notified of events such as when estimation
     *                 starts, ends or its progress significantly changes.
     */
    protected PointCorrespondencePinholeCameraRobustEstimator(final PinholeCameraRobustEstimatorListener listener) {
<span class="fc" id="L106">        super(listener);</span>
<span class="fc" id="L107">        normalizeSubsetPointCorrespondences = DEFAULT_NORMALIZE_SUBSET_POINT_CORRESPONDENCES;</span>
<span class="fc" id="L108">    }</span>

    /**
     * Constructor with listener and lists of points to be used to estimate a
     * pinhole camera.
     * Points in the lists located at the same position are considered to be
     * matched. Hence, both lists must have the same size, and their size must
     * be greater or equal than MIN_NUMBER_OF_POINT_CORRESPONDENCES (6 points).
     *
     * @param listener listener to be notified of events such as when estimation
     *                 starts, ends or its progress significantly changes.
     * @param points3D list of 3D points used to estimate a pinhole camera.
     * @param points2D list of corresponding projected 2D points used to
     *                 estimate a pinhole camera.
     * @throws IllegalArgumentException if provided lists of points don't have
     *                                  the same size or their size is smaller than required minimum size
     *                                  (6 correspondences).
     */
    protected PointCorrespondencePinholeCameraRobustEstimator(
            final PinholeCameraRobustEstimatorListener listener,
            final List&lt;Point3D&gt; points3D, final List&lt;Point2D&gt; points2D) {
<span class="fc" id="L129">        super(listener);</span>
<span class="fc" id="L130">        normalizeSubsetPointCorrespondences = DEFAULT_NORMALIZE_SUBSET_POINT_CORRESPONDENCES;</span>
<span class="fc" id="L131">        internalSetPoints(points3D, points2D);</span>
<span class="fc" id="L132">    }</span>

    /**
     * Returns list of 3D points to be used to estimate a pinhole camera.
     * Each point in the list of 3D points must be matched with the
     * corresponding 2D point in the list of projected 2D points located at the
     * same position. Hence, both 2D and 3D points lists must have the same
     * size, and their size must be greater or equal than
     * MIN_NUMBER_OF_POINT_CORRESPONDENCES (6 points).
     *
     * @return list of 3D points to be used to estimate a pinhole camera.
     */
    public List&lt;Point3D&gt; getPoints3D() {
<span class="fc" id="L145">        return points3D;</span>
    }

    /**
     * Returns list of 2D points ot be used to estimate a pinhole camera.
     * Each point in the list of 2D points must be matched with the
     * corresponding 3D point in the list of 3D points that can be projected
     * into a 2D point using a pinhole camera. Hence, both 2D and 3D points
     * lists must have the same size, and their size must be greater or equal
     * than MIN_NUMBER_OF_POINT_CORRESPONDENCES (6 points).
     *
     * @return list of 2D points to be used to estimate a pinhole camera.
     */
    public List&lt;Point2D&gt; getPoints2D() {
<span class="fc" id="L159">        return points2D;</span>
    }

    /**
     * Sets lists of 3D/2D points to be used to estimate a pinhole camera.
     * Points in the list located at the same position are considered to be
     * matched. Hence, both lists must have the same size, and their size must
     * be greater or equal than MIN_NUMBER_OF_POINT_CORRESPONDENCES.
     *
     * @param points3D list of 3D points used to estimate a pinhole camera.
     * @param points2D list of corresponding projected 2D points used to
     *                 estimate a pinhole camera.
     * @throws IllegalArgumentException if provided lists of points don't have
     *                                  the same size or their size is smaller than required minimum size
     *                                  (6 correspondences).
     * @throws LockedException          if estimator is locked because a computation is
     *                                  already in progress.
     */
    public final void setPoints(final List&lt;Point3D&gt; points3D, final List&lt;Point2D&gt; points2D) throws LockedException {
<span class="fc bfc" id="L178" title="All 2 branches covered.">        if (isLocked()) {</span>
<span class="fc" id="L179">            throw new LockedException();</span>
        }
<span class="fc" id="L181">        internalSetPoints(points3D, points2D);</span>
<span class="fc" id="L182">    }</span>

    /**
     * Indicates if estimator is ready to start the pinhole camera estimation.
     * This is true when input data (i.e. lists of 2D/3D matched points) are
     * provided and a minimum of MIN_NUMBER_OF_POINT_CORRESPONDENCES are
     * available.
     *
     * @return true if estimator is ready, false otherwise.
     */
    public boolean isReady() {
<span class="pc bpc" id="L193" title="2 of 6 branches missed.">        return points3D != null &amp;&amp; points2D != null &amp;&amp; points3D.size() == points2D.size()</span>
<span class="pc bpc" id="L194" title="1 of 2 branches missed.">                &amp;&amp; points3D.size() &gt;= MIN_NUMBER_OF_POINT_CORRESPONDENCES;</span>
    }

    /**
     * Returns quality scores corresponding to each pair of matched points.
     * The larger the score value the better the quality of the matching.
     * This implementation always returns null.
     * Subclasses using quality scores must implement proper behaviour.
     *
     * @return quality scores corresponding to each pair of matched points.
     */
    public double[] getQualityScores() {
<span class="fc" id="L206">        return null;</span>
    }

    /**
     * Sets quality scores corresponding to each pair of matched points.
     * The larger the score value the better the quality of the matching.
     * This implementation makes no action.
     * Subclasses using quality scores must implement proper behaviour.
     *
     * @param qualityScores quality scores corresponding to each pair of matched
     *                      points.
     * @throws LockedException          if robust estimator is locked because an
     *                                  estimation is already in progress.
     * @throws IllegalArgumentException if provided quality scores length is
     *                                  smaller than MIN_NUMBER_OF_POINT_CORRESPONDENCES (i.e. 6 samples).
     */
    public void setQualityScores(final double[] qualityScores) throws LockedException {
<span class="nc" id="L223">    }</span>

    /**
     * Returns value indicating if each picked subset point correspondences are
     * normalized to increase the accuracy of the estimation.
     *
     * @return true if each picked subset point correspondences are normalized,
     * false otherwise.
     */
    public boolean isNormalizeSubsetPointCorrespondences() {
<span class="fc" id="L233">        return normalizeSubsetPointCorrespondences;</span>
    }

    /**
     * Sets value indicating if each picked subset point correspondences are
     * normalized to increase the accuracy of the estimation.
     *
     * @param normalizeSubsetPointCorrespondences true if each picked subset
     *                                            point correspondences are normalized, false otherwise.
     * @throws LockedException if robust estimator is locked because an
     *                         estimation is already in progress.
     */
    public void setNormalizeSubsetPointCorrespondences(final boolean normalizeSubsetPointCorrespondences)
            throws LockedException {
<span class="fc bfc" id="L247" title="All 2 branches covered.">        if (isLocked()) {</span>
<span class="fc" id="L248">            throw new LockedException();</span>
        }
<span class="fc" id="L250">        this.normalizeSubsetPointCorrespondences = normalizeSubsetPointCorrespondences;</span>
<span class="fc" id="L251">    }</span>

    /**
     * Creates a pinhole camera robust estimator based on point correspondences
     * and using provided robust estimator method + DLT.
     *
     * @param method method of a robust estimator algorithm to estimate the best
     *               pinhole camera.
     * @return an instance of a pinhole camera robust estimator.
     */
    public static PointCorrespondencePinholeCameraRobustEstimator create(final RobustEstimatorMethod method) {
<span class="fc" id="L262">        return DLTPointCorrespondencePinholeCameraRobustEstimator.create(method);</span>
    }

    /**
     * Creates a pinhole camera robust estimator based on point correspondences
     * and using provided 2D/3D points and robust estimator method + DLT.
     *
     * @param points3D list of 3D points used to estimate a pinhole camera.
     * @param points2D list of corresponding projected 2D points used to
     *                 estimate a pinhole camera.
     * @param method   method of a robust estimator algorithm to estimate the best
     *                 pinhole camera.
     * @return an instance of a pinhole camera robust estimator.
     * @throws IllegalArgumentException if provided lists of points don't have
     *                                  the same size or their size is smaller than required minimum size
     *                                  (6 correspondences).
     */
    public static PointCorrespondencePinholeCameraRobustEstimator create(
            final List&lt;Point3D&gt; points3D, final List&lt;Point2D&gt; points2D, final RobustEstimatorMethod method) {
<span class="fc" id="L281">        return DLTPointCorrespondencePinholeCameraRobustEstimator.create(points3D, points2D, method);</span>
    }

    /**
     * Creates a pinhole camera robust estimator based on point
     * correspondences and using provided listener and robust estimator method
     * + DLT.
     *
     * @param listener listener to be notified of events such as when estimation
     *                 starts, ends or its progress significantly changes.
     * @param method   method of a robust estimator algorithm to estimate the best
     *                 pinhole camera.
     * @return an instance of a pinhole camera robust estimator.
     */
    public static PointCorrespondencePinholeCameraRobustEstimator create(
            final PinholeCameraRobustEstimatorListener listener, final RobustEstimatorMethod method) {
<span class="fc" id="L297">        return DLTPointCorrespondencePinholeCameraRobustEstimator.create(listener, method);</span>
    }

    /**
     * Creates a pinhole camera robust estimator based on point correspondences
     * and using provided listener, 2D/3D points and robust estimator method +
     * DLT.
     *
     * @param listener listener to be notified of events such as when estimation
     *                 starts, ends or its progress significantly changes.
     * @param points3D list of 3D points used to estimate a pinhole camera.
     * @param points2D list of corresponding projected 2D points used to
     *                 estimate a pinhole camera.
     * @param method   method of a robust estimator algorithm to estimate the best
     *                 pinhole camera.
     * @return an instance of a pinhole camera robust estimator.
     * @throws IllegalArgumentException if provided lists of points don't have
     *                                  the same size or their size is smaller than required minimum size
     *                                  (6 correspondences).
     */
    public static PointCorrespondencePinholeCameraRobustEstimator create(
            final PinholeCameraRobustEstimatorListener listener, final List&lt;Point3D&gt; points3D,
            final List&lt;Point2D&gt; points2D, final RobustEstimatorMethod method) {
<span class="fc" id="L320">        return DLTPointCorrespondencePinholeCameraRobustEstimator.create(listener, points3D, points2D, method);</span>
    }

    /**
     * Creates a pinhole camera robust estimator based on point correspondences
     * and using provided quality scores and robust estimator method + DLT.
     *
     * @param qualityScores quality scores corresponding to each pair of matched
     *                      points.
     * @param method        method of a robust estimator algorithm to estimate the best
     *                      pinhole camera.
     * @return an instance of a pinhole camera robust estimator.
     * @throws IllegalArgumentException if provided quality scores length is
     *                                  smaller than required minimum size (6 samples).
     */
    public static PointCorrespondencePinholeCameraRobustEstimator create(
            final double[] qualityScores, final RobustEstimatorMethod method) {
<span class="fc" id="L337">        return DLTPointCorrespondencePinholeCameraRobustEstimator.create(qualityScores, method);</span>
    }

    /**
     * Creates a pinhole camera robust estimator based on point correspondences
     * and using provided 2D/3D points, quality scores and robust estimator
     * method + DLT.
     *
     * @param points3D      list of 3D points used to estimate a pinhole camera.
     * @param points2D      list of corresponding projected 2D points used to
     *                      estimate a pinhole camera.
     * @param qualityScores quality scores corresponding to each pair of matched
     *                      points.
     * @param method        method of a robust estimator algorithm to estimate the best
     *                      pinhole camera.
     * @return an instance of a pinhole camera robust estimator.
     * @throws IllegalArgumentException if provided lists of points and quality
     *                                  scores don't have the same size or their size is smaller than required
     *                                  minimum size (6 correspondences).
     */
    public static PointCorrespondencePinholeCameraRobustEstimator create(
            final List&lt;Point3D&gt; points3D, final List&lt;Point2D&gt; points2D, final double[] qualityScores,
            final RobustEstimatorMethod method) {
<span class="fc" id="L360">        return DLTPointCorrespondencePinholeCameraRobustEstimator.create(points3D, points2D, qualityScores, method);</span>
    }

    /**
     * Creates a pinhole camera robust estimator based on point
     * correspondences and using provided listener and quality scores and robust
     * estimator method + DLT.
     *
     * @param listener      listener to be notified of events such as when estimation
     *                      starts, ends or its progress significantly changes.
     * @param qualityScores quality scores corresponding to each pair of matched
     *                      points.
     * @param method        method of a robust estimator algorithm to estimate the best
     *                      pinhole camera.
     * @return an instance of a pinhole camera robust estimator.
     * @throws IllegalArgumentException if provided quality scores don't have
     *                                  the required minimum size (6 correspondences).
     */
    public static PointCorrespondencePinholeCameraRobustEstimator create(
            final PinholeCameraRobustEstimatorListener listener, final double[] qualityScores,
            final RobustEstimatorMethod method) {
<span class="fc" id="L381">        return DLTPointCorrespondencePinholeCameraRobustEstimator.create(listener, qualityScores, method);</span>
    }

    /**
     * Creates a pinhole camera robust estimator based on point correspondences
     * and using provided listener, 2D/3D points, quality scores and robust
     * estimator method + DLT.
     *
     * @param listener      listener to be notified of events such as when estimation
     *                      starts, ends or its progress significantly changes.
     * @param points3D      list of 3D points used to estimate a pinhole camera.
     * @param points2D      list of corresponding projected 2D points used to
     *                      estimate a pinhole camera.
     * @param qualityScores quality scores corresponding to each pair of matched
     *                      points.
     * @param method        method of a robust estimator algorithm to estimate the best
     *                      pinhole camera.
     * @return an instance of a pinhole camera robust estimator.
     * @throws IllegalArgumentException if provided lists of points and quality
     *                                  scores don't have the same size or their size is smaller than required
     *                                  minimum size (6 correspondences).
     */
    public static PointCorrespondencePinholeCameraRobustEstimator create(
            final PinholeCameraRobustEstimatorListener listener, final List&lt;Point3D&gt; points3D,
            final List&lt;Point2D&gt; points2D, final double[] qualityScores, final RobustEstimatorMethod method) {
<span class="fc" id="L406">        return DLTPointCorrespondencePinholeCameraRobustEstimator.create(listener, points3D, points2D, qualityScores,</span>
                method);
    }

    /**
     * Creates a pinhole camera robust estimator based on point correspondences
     * and using provided robust estimator method + EPnP.
     *
     * @param intrinsic intrinsic parameters of camera to be estimated.
     * @param method    method of a robust estimator algorithm to estimate the best
     *                  pinhole camera.
     * @return an instance of a pinhole camera robust estimator.
     */
    public static PointCorrespondencePinholeCameraRobustEstimator create(
            final PinholeCameraIntrinsicParameters intrinsic, final RobustEstimatorMethod method) {
<span class="fc" id="L421">        return EPnPPointCorrespondencePinholeCameraRobustEstimator.create(intrinsic, method);</span>
    }

    /**
     * Creates a pinhole camera robust estimator based on point correspondences
     * and using provided 2D/3D points and robust estimator method + EPnP.
     *
     * @param intrinsic intrinsic parameters of camera to be estimated.
     * @param points3D  list of 3D points used to estimate a pinhole camera.
     * @param points2D  list of corresponding projected 2D points used to
     *                  estimate a pinhole camera.
     * @param method    method of a robust estimator algorithm to estimate the best
     *                  pinhole camera.
     * @return an instance of a pinhole camera robust estimator.
     * @throws IllegalArgumentException if provided lists of points don't have
     *                                  the same size or their size is smaller than required minimum size
     *                                  (6 correspondences).
     */
    public static PointCorrespondencePinholeCameraRobustEstimator create(
            final PinholeCameraIntrinsicParameters intrinsic, final List&lt;Point3D&gt; points3D,
            final List&lt;Point2D&gt; points2D, final RobustEstimatorMethod method) {
<span class="fc" id="L442">        return EPnPPointCorrespondencePinholeCameraRobustEstimator.create(intrinsic, points3D, points2D, method);</span>
    }

    /**
     * Creates a pinhole camera robust estimator based on point
     * correspondences and using provided listener and robust estimator method
     * + EPnP.
     *
     * @param listener  listener to be notified of events such as when estimation
     *                  starts, ends or its progress significantly changes.
     * @param intrinsic intrinsic parameters of camera to be estimated.
     * @param method    method of a robust estimator algorithm to estimate the best
     *                  pinhole camera.
     * @return an instance of a pinhole camera robust estimator.
     */
    public static PointCorrespondencePinholeCameraRobustEstimator create(
            final PinholeCameraRobustEstimatorListener listener, final PinholeCameraIntrinsicParameters intrinsic,
            final RobustEstimatorMethod method) {
<span class="fc" id="L460">        return EPnPPointCorrespondencePinholeCameraRobustEstimator.create(listener, intrinsic, method);</span>
    }

    /**
     * Creates a pinhole camera robust estimator based on point correspondences
     * and using provided listener, 2D/3D points and robust estimator method +
     * EPnP.
     *
     * @param listener  listener to be notified of events such as when estimation
     *                  starts, ends or its progress significantly changes.
     * @param intrinsic intrinsic parameters of camera to be estimated.
     * @param points3D  list of 3D points used to estimate a pinhole camera.
     * @param points2D  list of corresponding projected 2D points used to
     *                  estimate a pinhole camera.
     * @param method    method of a robust estimator algorithm to estimate the best
     *                  pinhole camera.
     * @return an instance of a pinhole camera robust estimator.
     * @throws IllegalArgumentException if provided lists of points don't have
     *                                  the same size or their size is smaller than required minimum size
     *                                  (6 correspondences).
     */
    public static PointCorrespondencePinholeCameraRobustEstimator create(
            final PinholeCameraRobustEstimatorListener listener, final PinholeCameraIntrinsicParameters intrinsic,
            final List&lt;Point3D&gt; points3D, final List&lt;Point2D&gt; points2D, final RobustEstimatorMethod method) {
<span class="fc" id="L484">        return EPnPPointCorrespondencePinholeCameraRobustEstimator.create(listener, intrinsic, points3D, points2D,</span>
                method);
    }

    /**
     * Creates a pinhole camera robust estimator based on point correspondences
     * and using provided quality scores and robust estimator method + EPnP.
     *
     * @param intrinsic     intrinsic parameters of camera to be estimated.
     * @param qualityScores quality scores corresponding to each pair of matched
     *                      points.
     * @param method        method of a robust estimator algorithm to estimate the best
     *                      pinhole camera.
     * @return an instance of a pinhole camera robust estimator.
     * @throws IllegalArgumentException if provided quality scores length is
     *                                  smaller than required minimum size (6 samples).
     */
    public static PointCorrespondencePinholeCameraRobustEstimator create(
            final PinholeCameraIntrinsicParameters intrinsic, final double[] qualityScores,
            final RobustEstimatorMethod method) {
<span class="fc" id="L504">        return EPnPPointCorrespondencePinholeCameraRobustEstimator.create(intrinsic, qualityScores, method);</span>
    }

    /**
     * Creates a pinhole camera robust estimator based on point correspondences
     * and using provided 2D/3D points, quality scores and robust estimator
     * method + EPnP.
     *
     * @param intrinsic     intrinsic parameters of camera to be estimated.
     * @param points3D      list of 3D points used to estimate a pinhole camera.
     * @param points2D      list of corresponding projected 2D points used to
     *                      estimate a pinhole camera.
     * @param qualityScores quality scores corresponding to each pair of matched
     *                      points.
     * @param method        method of a robust estimator algorithm to estimate the best
     *                      pinhole camera.
     * @return an instance of a pinhole camera robust estimator.
     * @throws IllegalArgumentException if provided lists of points and quality
     *                                  scores don't have the same size or their size is smaller than required
     *                                  minimum size (6 correspondences).
     */
    public static PointCorrespondencePinholeCameraRobustEstimator create(
            final PinholeCameraIntrinsicParameters intrinsic, final List&lt;Point3D&gt; points3D,
            final List&lt;Point2D&gt; points2D, final double[] qualityScores, final RobustEstimatorMethod method) {
<span class="fc" id="L528">        return EPnPPointCorrespondencePinholeCameraRobustEstimator.create(intrinsic, points3D, points2D, qualityScores,</span>
                method);
    }

    /**
     * Creates a pinhole camera robust estimator based on point
     * correspondences and using provided listener and quality scores and
     * a robust estimation method + EPnP.
     *
     * @param listener      listener to be notified of events such as when estimation
     *                      starts, ends or its progress significantly changes.
     * @param intrinsic     intrinsic parameters of camera to be estimated.
     * @param qualityScores quality scores corresponding to each pair of matched
     *                      points.
     * @param method        method of a robust estimator algorithm to estimate the best
     *                      pinhole camera.
     * @return an instance of a pinhole camera robust estimator.
     * @throws IllegalArgumentException if provided quality scores don't have
     *                                  the required minimum size (6 correspondences).
     */
    public static PointCorrespondencePinholeCameraRobustEstimator create(
            final PinholeCameraRobustEstimatorListener listener, final PinholeCameraIntrinsicParameters intrinsic,
            final double[] qualityScores, final RobustEstimatorMethod method) {
<span class="fc" id="L551">        return EPnPPointCorrespondencePinholeCameraRobustEstimator.create(listener, intrinsic, qualityScores, method);</span>
    }

    /**
     * Creates a pinhole camera robust estimator based on point correspondences
     * and using provided listener, 2D/3D points, quality scores and robust
     * estimator method + EPnP.
     *
     * @param listener      listener to be notified of events such as when estimation
     *                      starts, ends or its progress significantly changes.
     * @param intrinsic     intrinsic parameters of camera to be estimated.
     * @param points3D      list of 3D points used to estimate a pinhole camera.
     * @param points2D      list of corresponding projected 2D points used to
     *                      estimate a pinhole camera.
     * @param qualityScores quality scores corresponding to each pair of matched
     *                      points.
     * @param method        method of a robust estimator algorithm to estimate the best
     *                      pinhole camera.
     * @return an instance of a pinhole camera robust estimator.
     * @throws IllegalArgumentException if provided lists of points and quality
     *                                  scores don't have the same size or their size is smaller than required
     *                                  minimum size (6 correspondences).
     */
    public static PointCorrespondencePinholeCameraRobustEstimator create(
            final PinholeCameraRobustEstimatorListener listener, final PinholeCameraIntrinsicParameters intrinsic,
            final List&lt;Point3D&gt; points3D, final List&lt;Point2D&gt; points2D, final double[] qualityScores,
            final RobustEstimatorMethod method) {
<span class="fc" id="L578">        return EPnPPointCorrespondencePinholeCameraRobustEstimator.create(listener, intrinsic, points3D, points2D,</span>
                qualityScores, method);
    }

    /**
     * Creates a pinhole camera robust estimator based on point correspondences
     * and using provided robust estimator method + UPnP.
     *
     * @param skewness                 skewness value of intrinsic parameters of camera to be
     *                                 estimated.
     * @param horizontalPrincipalPoint horizontal principal point value of
     *                                 intrinsic parameters of camera to be estimated.
     * @param verticalPrincipalPoint   vertical principal point value of
     *                                 intrinsic parameters of camera to be estimated.
     * @param method                   method of a robust estimator algorithm to estimate the best
     *                                 pinhole camera.
     * @return an instance of a pinhole camera robust estimator.
     */
    public static PointCorrespondencePinholeCameraRobustEstimator create(
            final double skewness, final double horizontalPrincipalPoint, final double verticalPrincipalPoint,
            final RobustEstimatorMethod method) {
<span class="fc" id="L599">        final var estimator = UPnPPointCorrespondencePinholeCameraRobustEstimator.create(method);</span>
        try {
<span class="fc" id="L601">            estimator.setSkewness(skewness);</span>
<span class="fc" id="L602">            estimator.setHorizontalPrincipalPoint(horizontalPrincipalPoint);</span>
<span class="fc" id="L603">            estimator.setVerticalPrincipalPoint(verticalPrincipalPoint);</span>
<span class="nc" id="L604">        } catch (final LockedException ignore) {</span>
            // ignore
<span class="fc" id="L606">        }</span>
<span class="fc" id="L607">        return estimator;</span>
    }

    /**
     * Creates a pinhole camera robust estimator based on point correspondences
     * and using provided 2D/3D points and robust estimator method + UPnP.
     *
     * @param skewness                 skewness value of intrinsic parameters of camera to be
     *                                 estimated.
     * @param horizontalPrincipalPoint horizontal principal point value of
     *                                 intrinsic parameters of camera to be estimated.
     * @param verticalPrincipalPoint   vertical principal point value of
     *                                 intrinsic parameters of camera to be estimated.
     * @param points3D                 list of 3D points used to estimate a pinhole camera.
     * @param points2D                 list of corresponding projected 2D points used to
     *                                 estimate a pinhole camera.
     * @param method                   method of a robust estimator algorithm to estimate the best
     *                                 pinhole camera.
     * @return an instance of a pinhole camera robust estimator.
     * @throws IllegalArgumentException if provided lists of points don't have
     *                                  the same size or their size is smaller than required minimum size
     *                                  (6 correspondences).
     */
    public static PointCorrespondencePinholeCameraRobustEstimator create(
            final double skewness, final double horizontalPrincipalPoint, final double verticalPrincipalPoint,
            final List&lt;Point3D&gt; points3D, final List&lt;Point2D&gt; points2D, final RobustEstimatorMethod method) {
<span class="fc" id="L633">        final var estimator = UPnPPointCorrespondencePinholeCameraRobustEstimator.create(points3D, points2D, method);</span>
        try {
<span class="fc" id="L635">            estimator.setSkewness(skewness);</span>
<span class="fc" id="L636">            estimator.setHorizontalPrincipalPoint(horizontalPrincipalPoint);</span>
<span class="fc" id="L637">            estimator.setVerticalPrincipalPoint(verticalPrincipalPoint);</span>
<span class="nc" id="L638">        } catch (final LockedException ignore) {</span>
            // ignore
<span class="fc" id="L640">        }</span>
<span class="fc" id="L641">        return estimator;</span>
    }

    /**
     * Creates a pinhole camera robust estimator based on point
     * correspondences and using provided listener and robust method + UPnP.
     *
     * @param listener                 listener to be notified of events such as when estimation
     *                                 starts, ends or its progress significantly changes.
     * @param skewness                 skewness value of intrinsic parameters of camera to be
     *                                 estimated.
     * @param horizontalPrincipalPoint horizontal principal point value of
     *                                 intrinsic parameters of camera to be estimated.
     * @param verticalPrincipalPoint   vertical principal point value of
     *                                 intrinsic parameters of camera to be estimated.
     * @param method                   method of a robust estimator algorithm to estimate the best
     *                                 pinhole camera.
     * @return an instance of a pinhole camera robust estimator.
     */
    public static PointCorrespondencePinholeCameraRobustEstimator create(
            final PinholeCameraRobustEstimatorListener listener, final double skewness,
            final double horizontalPrincipalPoint, final double verticalPrincipalPoint,
            final RobustEstimatorMethod method) {
<span class="fc" id="L664">        final var estimator = UPnPPointCorrespondencePinholeCameraRobustEstimator.create(listener, method);</span>
        try {
<span class="fc" id="L666">            estimator.setSkewness(skewness);</span>
<span class="fc" id="L667">            estimator.setHorizontalPrincipalPoint(horizontalPrincipalPoint);</span>
<span class="fc" id="L668">            estimator.setVerticalPrincipalPoint(verticalPrincipalPoint);</span>
<span class="nc" id="L669">        } catch (final LockedException ignore) {</span>
            // ignore
<span class="fc" id="L671">        }</span>
<span class="fc" id="L672">        return estimator;</span>
    }

    /**
     * Creates a pinhole camera robust estimator based on point correspondences
     * and using provided listener, 2D/3D points and robust estimator method +
     * UPnP.
     *
     * @param listener                 listener to be notified of events such as when estimation
     *                                 starts, ends or its progress significantly changes.
     * @param skewness                 skewness value of intrinsic parameters of camera to be
     *                                 estimated.
     * @param horizontalPrincipalPoint horizontal principal point value of
     *                                 intrinsic parameters of camera to be estimated.
     * @param verticalPrincipalPoint   vertical principal point value of
     *                                 intrinsic parameters of camera to be estimated.
     * @param points3D                 list of 3D points used to estimate a pinhole camera.
     * @param points2D                 list of corresponding projected 2D points used to
     *                                 estimate a pinhole camera.
     * @param method                   method of a robust estimator algorithm to estimate the best
     *                                 pinhole camera.
     * @return an instance of a pinhole camera robust estimator.
     * @throws IllegalArgumentException if provided lists of points don't have
     *                                  the same size or their size is smaller than required minimum size
     *                                  (6 correspondences).
     */
    public static PointCorrespondencePinholeCameraRobustEstimator create(
            final PinholeCameraRobustEstimatorListener listener, final double skewness,
            final double horizontalPrincipalPoint, final double verticalPrincipalPoint, final List&lt;Point3D&gt; points3D,
            final List&lt;Point2D&gt; points2D, final RobustEstimatorMethod method) {
<span class="fc" id="L702">        final var estimator = UPnPPointCorrespondencePinholeCameraRobustEstimator.create(listener, points3D, points2D,</span>
                method);
        try {
<span class="fc" id="L705">            estimator.setSkewness(skewness);</span>
<span class="fc" id="L706">            estimator.setHorizontalPrincipalPoint(horizontalPrincipalPoint);</span>
<span class="fc" id="L707">            estimator.setVerticalPrincipalPoint(verticalPrincipalPoint);</span>
<span class="nc" id="L708">        } catch (final LockedException ignore) {</span>
            // ignore
<span class="fc" id="L710">        }</span>
<span class="fc" id="L711">        return estimator;</span>
    }

    /**
     * Creates a pinhole camera robust estimator based on point correspondences
     * and using provided quality scores and robust estimator method + UPnP.
     *
     * @param skewness                 skewness value of intrinsic parameters of camera to be
     *                                 estimated.
     * @param horizontalPrincipalPoint horizontal principal point value of
     *                                 intrinsic parameters of camera to be estimated.
     * @param verticalPrincipalPoint   vertical principal point value of
     *                                 intrinsic parameters of camera to be estimated.
     * @param qualityScores            quality scores corresponding to each pair of matched
     *                                 points.
     * @param method                   method of a robust estimator algorithm to estimate the best
     *                                 pinhole camera.
     * @return an instance of a pinhole camera robust estimator.
     * @throws IllegalArgumentException if provided quality scores length is
     *                                  smaller than required minimum size (6 samples).
     */
    public static PointCorrespondencePinholeCameraRobustEstimator create(
            final double skewness, final double horizontalPrincipalPoint, final double verticalPrincipalPoint,
            final double[] qualityScores, final RobustEstimatorMethod method) {
<span class="fc" id="L735">        final var estimator = UPnPPointCorrespondencePinholeCameraRobustEstimator.create(qualityScores, method);</span>
        try {
<span class="fc" id="L737">            estimator.setSkewness(skewness);</span>
<span class="fc" id="L738">            estimator.setHorizontalPrincipalPoint(horizontalPrincipalPoint);</span>
<span class="fc" id="L739">            estimator.setVerticalPrincipalPoint(verticalPrincipalPoint);</span>
<span class="nc" id="L740">        } catch (final LockedException ignore) {</span>
            // ignore
<span class="fc" id="L742">        }</span>
<span class="fc" id="L743">        return estimator;</span>
    }

    /**
     * Creates a pinhole camera robust estimator based on point correspondences
     * and using provided 2D/3D points, quality scores and robust estimator
     * method + UPnP.
     *
     * @param skewness                 skewness value of intrinsic parameters of camera to be
     *                                 estimated.
     * @param horizontalPrincipalPoint horizontal principal point value of
     *                                 intrinsic parameters of camera to be estimated.
     * @param verticalPrincipalPoint   vertical principal point value of
     *                                 intrinsic parameters of camera to be estimated.
     * @param points3D                 list of 3D points used to estimate a pinhole camera.
     * @param points2D                 list of corresponding projected 2D points used to
     *                                 estimate a pinhole camera.
     * @param qualityScores            quality scores corresponding to each pair of matched
     *                                 points.
     * @param method                   method of a robust estimator algorithm to estimate the best
     *                                 pinhole camera.
     * @return an instance of a pinhole camera robust estimator.
     * @throws IllegalArgumentException if provided lists of points and quality
     *                                  scores don't have the same size or their size is smaller than required
     *                                  minimum size (6 correspondences).
     */
    public static PointCorrespondencePinholeCameraRobustEstimator create(
            final double skewness, final double horizontalPrincipalPoint, final double verticalPrincipalPoint,
            final List&lt;Point3D&gt; points3D, final List&lt;Point2D&gt; points2D, final double[] qualityScores,
            final RobustEstimatorMethod method) {
<span class="fc" id="L773">        final var estimator = UPnPPointCorrespondencePinholeCameraRobustEstimator.create(points3D, points2D,</span>
                qualityScores, method);
        try {
<span class="fc" id="L776">            estimator.setSkewness(skewness);</span>
<span class="fc" id="L777">            estimator.setHorizontalPrincipalPoint(horizontalPrincipalPoint);</span>
<span class="fc" id="L778">            estimator.setVerticalPrincipalPoint(verticalPrincipalPoint);</span>
<span class="nc" id="L779">        } catch (final LockedException ignore) {</span>
            // ignore
<span class="fc" id="L781">        }</span>
<span class="fc" id="L782">        return estimator;</span>
    }

    /**
     * Creates a pinhole camera robust estimator based on point
     * correspondences and using provided listener and quality scores and robust
     * method + UPnP.
     *
     * @param listener                 listener to be notified of events such as when estimation
     *                                 starts, ends or its progress significantly changes.
     * @param skewness                 skewness value of intrinsic parameters of camera to be
     *                                 estimated.
     * @param horizontalPrincipalPoint horizontal principal point value of
     *                                 intrinsic parameters of camera to be estimated.
     * @param verticalPrincipalPoint   vertical principal point value of
     *                                 intrinsic parameters of camera to be estimated.
     * @param qualityScores            quality scores corresponding to each pair of matched
     *                                 points.
     * @param method                   method of a robust estimator algorithm to estimate the best
     *                                 pinhole camera.
     * @return an instance of a pinhole camera robust estimator.
     * @throws IllegalArgumentException if provided quality scores don't have
     *                                  the required minimum size (6 correspondences).
     */
    public static PointCorrespondencePinholeCameraRobustEstimator create(
            final PinholeCameraRobustEstimatorListener listener, final double skewness,
            final double horizontalPrincipalPoint, final double verticalPrincipalPoint, final double[] qualityScores,
            final RobustEstimatorMethod method) {
<span class="fc" id="L810">        final var estimator = UPnPPointCorrespondencePinholeCameraRobustEstimator.create(listener, qualityScores,</span>
                method);
        try {
<span class="fc" id="L813">            estimator.setSkewness(skewness);</span>
<span class="fc" id="L814">            estimator.setHorizontalPrincipalPoint(horizontalPrincipalPoint);</span>
<span class="fc" id="L815">            estimator.setVerticalPrincipalPoint(verticalPrincipalPoint);</span>
<span class="nc" id="L816">        } catch (final LockedException ignore) {</span>
            // ignore
<span class="fc" id="L818">        }</span>
<span class="fc" id="L819">        return estimator;</span>
    }

    /**
     * Creates a pinhole camera robust estimator based on point correspondences
     * and using provided listener, 2D/3D points, quality scores and robust
     * estimator method + UPnP.
     *
     * @param listener                 listener to be notified of events such as when estimation
     *                                 starts, ends or its progress significantly changes.
     * @param skewness                 skewness value of intrinsic parameters of camera to be
     *                                 estimated.
     * @param horizontalPrincipalPoint horizontal principal point value of
     *                                 intrinsic parameters of camera to be estimated.
     * @param verticalPrincipalPoint   vertical principal point value of
     *                                 intrinsic parameters of camera to be estimated.
     * @param points3D                 list of 3D points used to estimate a pinhole camera.
     * @param points2D                 list of corresponding projected 2D points used to
     *                                 estimate a pinhole camera.
     * @param qualityScores            quality scores corresponding to each pair of matched
     *                                 points.
     * @param method                   method of a robust estimator algorithm to estimate the best
     *                                 pinhole camera.
     * @return an instance of a pinhole camera robust estimator.
     * @throws IllegalArgumentException if provided lists of points and quality
     *                                  scores don't have the same size or their size is smaller than required
     *                                  minimum size (6 correspondences).
     */
    public static PointCorrespondencePinholeCameraRobustEstimator create(
            final PinholeCameraRobustEstimatorListener listener, final double skewness,
            final double horizontalPrincipalPoint, final double verticalPrincipalPoint, final List&lt;Point3D&gt; points3D,
            final List&lt;Point2D&gt; points2D, final double[] qualityScores, final RobustEstimatorMethod method) {
<span class="fc" id="L851">        final var estimator = UPnPPointCorrespondencePinholeCameraRobustEstimator.create(listener, points3D, points2D,</span>
                qualityScores, method);
        try {
<span class="fc" id="L854">            estimator.setSkewness(skewness);</span>
<span class="fc" id="L855">            estimator.setHorizontalPrincipalPoint(horizontalPrincipalPoint);</span>
<span class="fc" id="L856">            estimator.setVerticalPrincipalPoint(verticalPrincipalPoint);</span>
<span class="nc" id="L857">        } catch (final LockedException ignore) {</span>
            // ignore
<span class="fc" id="L859">        }</span>
<span class="fc" id="L860">        return estimator;</span>
    }

    /**
     * Creates a pinhole camera robust estimator based on point correspondences
     * and using default robust estimator method + DLT.
     *
     * @return an instance of a pinhole camera robust estimator.
     */
    public static PointCorrespondencePinholeCameraRobustEstimator create() {
<span class="fc" id="L870">        return create(DEFAULT_ROBUST_METHOD);</span>
    }

    /**
     * Creates a pinhole camera robust estimator based on point correspondences
     * and using provided 2D/3D points and default robust estimator method +
     * DLT.
     *
     * @param points3D list of 3D points used to estimate a pinhole camera.
     * @param points2D list of corresponding projected 2D points used to
     *                 estimate a pinhole camera.
     * @return an instance of a pinhole camera robust estimator.
     * @throws IllegalArgumentException if provided lists of points don't have
     *                                  the same size or their size is smaller than required minimum size
     *                                  (6 correspondences).
     */
    public static PointCorrespondencePinholeCameraRobustEstimator create(
            final List&lt;Point3D&gt; points3D, final List&lt;Point2D&gt; points2D) {
<span class="fc" id="L888">        return create(points3D, points2D, DEFAULT_ROBUST_METHOD);</span>
    }

    /**
     * Creates a pinhole camera robust estimator based on point
     * correspondences and using provided listener and default robust estimator
     * method + DLT.
     *
     * @param listener listener to be notified of events such as when estimation
     *                 starts, ends or its progress significantly changes.
     * @return an instance of a pinhole camera robust estimator.
     */
    public static PointCorrespondencePinholeCameraRobustEstimator create(
            final PinholeCameraRobustEstimatorListener listener) {
<span class="fc" id="L902">        return create(listener, DEFAULT_ROBUST_METHOD);</span>
    }

    /**
     * Creates a pinhole camera robust estimator based on point correspondences
     * and using provided listener, 2D/3D points and default robust estimator
     * method + DLT.
     *
     * @param listener listener to be notified of events such as when estimation
     *                 starts, ends or its progress significantly changes.
     * @param points3D list of 3D points used to estimate a pinhole camera.
     * @param points2D list of corresponding projected 2D points used to
     *                 estimate a pinhole camera.
     * @return an instance of a pinhole camera robust estimator.
     * @throws IllegalArgumentException if provided lists of points don't have
     *                                  the same size or their size is smaller than required minimum size
     *                                  (6 correspondences).
     */
    public static PointCorrespondencePinholeCameraRobustEstimator create(
            final PinholeCameraRobustEstimatorListener listener, final List&lt;Point3D&gt; points3D,
            final List&lt;Point2D&gt; points2D) {
<span class="fc" id="L923">        return create(listener, points3D, points2D, DEFAULT_ROBUST_METHOD);</span>
    }

    /**
     * Creates a pinhole camera robust estimator based on point correspondences
     * and using provided quality scores and default robust estimator method +
     * DLT.
     *
     * @param qualityScores quality scores corresponding to each pair of matched
     *                      points.
     * @return an instance of a pinhole camera robust estimator.
     * @throws IllegalArgumentException if provided quality scores length is
     *                                  smaller than required minimum size (6 samples).
     */
    public static PointCorrespondencePinholeCameraRobustEstimator create(final double[] qualityScores) {
<span class="fc" id="L938">        return create(qualityScores, DEFAULT_ROBUST_METHOD);</span>
    }

    /**
     * Creates a pinhole camera robust estimator based on point correspondences
     * and using provided 2D/3D points, quality scores and default robust
     * estimator method + DLT.
     *
     * @param points3D      list of 3D points used to estimate a pinhole camera.
     * @param points2D      list of corresponding projected 2D points used to
     *                      estimate a pinhole camera.
     * @param qualityScores quality scores corresponding to each pair of matched
     *                      points.
     * @return an instance of a pinhole camera robust estimator.
     * @throws IllegalArgumentException if provided lists of points and quality
     *                                  scores don't have the same size or their size is smaller than required
     *                                  minimum size (6 correspondences).
     */
    public static PointCorrespondencePinholeCameraRobustEstimator create(
            final List&lt;Point3D&gt; points3D, final List&lt;Point2D&gt; points2D, final double[] qualityScores) {
<span class="fc" id="L958">        return create(points3D, points2D, qualityScores, DEFAULT_ROBUST_METHOD);</span>
    }

    /**
     * Creates a pinhole camera robust estimator based on point
     * correspondences and using provided listener, quality scores and default
     * robust estimator method + DLT.
     *
     * @param listener      listener to be notified of events such as when estimation
     *                      starts, ends or its progress significantly changes.
     * @param qualityScores quality scores corresponding to each pair of matched
     *                      points.
     * @return an instance of a pinhole camera robust estimator.
     * @throws IllegalArgumentException if provided quality scores don't have
     *                                  the required minimum size (6 correspondences).
     */
    public static PointCorrespondencePinholeCameraRobustEstimator create(
            final PinholeCameraRobustEstimatorListener listener, final double[] qualityScores) {
<span class="fc" id="L976">        return create(listener, qualityScores, DEFAULT_ROBUST_METHOD);</span>
    }

    /**
     * Creates a pinhole camera robust estimator based on point correspondences
     * and using provided listener, 2D/3D points, quality scores and default
     * robust estimator method + DLT.
     *
     * @param listener      listener to be notified of events such as when estimation
     *                      starts, ends or its progress significantly changes.
     * @param points3D      list of 3D points used to estimate a pinhole camera.
     * @param points2D      list of corresponding projected 2D points used to
     *                      estimate a pinhole camera.
     * @param qualityScores quality scores corresponding to each pair of matched
     *                      points.
     * @return an instance of a pinhole camera robust estimator.
     * @throws IllegalArgumentException if provided lists of points and quality
     *                                  scores don't have the same size or their size is smaller than required
     *                                  minimum size (6 correspondences).
     */
    public static PointCorrespondencePinholeCameraRobustEstimator create(
            final PinholeCameraRobustEstimatorListener listener, final List&lt;Point3D&gt; points3D,
            final List&lt;Point2D&gt; points2D, final double[] qualityScores) {
<span class="fc" id="L999">        return create(listener, points3D, points2D, qualityScores, DEFAULT_ROBUST_METHOD);</span>
    }

    /**
     * Creates a pinhole camera robust estimator based on point correspondences
     * and using default robust estimator method + EPnP.
     *
     * @param intrinsic intrinsic parameters of camera to be estimated.
     * @return an instance of a pinhole camera robust estimator.
     */
    public static PointCorrespondencePinholeCameraRobustEstimator create(
            final PinholeCameraIntrinsicParameters intrinsic) {
<span class="fc" id="L1011">        return create(intrinsic, DEFAULT_ROBUST_METHOD);</span>
    }

    /**
     * Creates a pinhole camera robust estimator based on point correspondences
     * and using provided 2D/3D points and default robust estimator method +
     * EPnP.
     *
     * @param intrinsic intrinsic parameters of camera to be estimated.
     * @param points3D  list of 3D points used to estimate a pinhole camera.
     * @param points2D  list of corresponding projected 2D points used to
     *                  estimate a pinhole camera.
     * @return an instance of a pinhole camera robust estimator.
     * @throws IllegalArgumentException if provided lists of points don't have
     *                                  the same size or their size is smaller than required minimum size
     *                                  (6 correspondences).
     */
    public static PointCorrespondencePinholeCameraRobustEstimator create(
            final PinholeCameraIntrinsicParameters intrinsic, final List&lt;Point3D&gt; points3D,
            final List&lt;Point2D&gt; points2D) {
<span class="fc" id="L1031">        return create(intrinsic, points3D, points2D, DEFAULT_ROBUST_METHOD);</span>
    }

    /**
     * Creates a pinhole camera robust estimator based on point
     * correspondences and using provided listener and default robust estimator
     * method + EPnP.
     *
     * @param listener  listener to be notified of events such as when estimation
     *                  starts, ends or its progress significantly changes.
     * @param intrinsic intrinsic parameters of camera to be estimated.
     * @return an instance of a pinhole camera robust estimator.
     */
    public static PointCorrespondencePinholeCameraRobustEstimator create(
            final PinholeCameraRobustEstimatorListener listener, final PinholeCameraIntrinsicParameters intrinsic) {
<span class="fc" id="L1046">        return create(listener, intrinsic, DEFAULT_ROBUST_METHOD);</span>
    }

    /**
     * Creates a pinhole camera robust estimator based on point correspondences
     * and using provided listener, 2D/3D points and default robust estimator
     * method + EPnP.
     *
     * @param listener  listener to be notified of events such as when estimation
     *                  starts, ends or its progress significantly changes.
     * @param intrinsic intrinsic parameters of camera to be estimated.
     * @param points3D  list of 3D points used to estimate a pinhole camera.
     * @param points2D  list of corresponding projected 2D points used to
     *                  estimate a pinhole camera.
     * @return an instance of a pinhole camera robust estimator.
     * @throws IllegalArgumentException if provided lists of points don't have
     *                                  the same size or their size is smaller than required minimum size
     *                                  (6 correspondences).
     */
    public static PointCorrespondencePinholeCameraRobustEstimator create(
            final PinholeCameraRobustEstimatorListener listener, final PinholeCameraIntrinsicParameters intrinsic,
            final List&lt;Point3D&gt; points3D, final List&lt;Point2D&gt; points2D) {
<span class="fc" id="L1068">        return create(listener, intrinsic, points3D, points2D, DEFAULT_ROBUST_METHOD);</span>
    }

    /**
     * Creates a pinhole camera robust estimator based on point correspondences
     * and using provided quality scores and default robust estimator method +
     * EPnP.
     *
     * @param intrinsic     intrinsic parameters of camera to be estimated.
     * @param qualityScores quality scores corresponding to each pair of matched
     *                      points.
     * @return an instance of a pinhole camera robust estimator.
     * @throws IllegalArgumentException if provided quality scores length is
     *                                  smaller than required minimum size (6 samples).
     */
    public static PointCorrespondencePinholeCameraRobustEstimator create(
            final PinholeCameraIntrinsicParameters intrinsic, final double[] qualityScores) {
<span class="fc" id="L1085">        return create(intrinsic, qualityScores, DEFAULT_ROBUST_METHOD);</span>
    }

    /**
     * Creates a pinhole camera robust estimator based on point correspondences
     * and using provided 2D/3D points, quality scores and default robust
     * estimator method + EPnP.
     *
     * @param intrinsic     intrinsic parameters of camera to be estimated.
     * @param points3D      list of 3D points used to estimate a pinhole camera.
     * @param points2D      list of corresponding projected 2D points used to
     *                      estimate a pinhole camera.
     * @param qualityScores quality scores corresponding to each pair of matched
     *                      points.
     * @return an instance of a pinhole camera robust estimator.
     * @throws IllegalArgumentException if provided lists of points and quality
     *                                  scores don't have the same size or their size is smaller than required
     *                                  minimum size (6 correspondences).
     */
    public static PointCorrespondencePinholeCameraRobustEstimator create(
            final PinholeCameraIntrinsicParameters intrinsic, final List&lt;Point3D&gt; points3D,
            final List&lt;Point2D&gt; points2D, final double[] qualityScores) {
<span class="fc" id="L1107">        return create(intrinsic, points3D, points2D, qualityScores, DEFAULT_ROBUST_METHOD);</span>
    }

    /**
     * Creates a pinhole camera robust estimator based on point
     * correspondences and using provided listener, quality scores and default
     * robust estimator method + EPnP.
     *
     * @param listener      listener to be notified of events such as when estimation
     *                      starts, ends or its progress significantly changes.
     * @param intrinsic     intrinsic parameters of camera to be estimated.
     * @param qualityScores quality scores corresponding to each pair of matched
     *                      points.
     * @return an instance of a pinhole camera robust estimator.
     * @throws IllegalArgumentException if provided quality scores don't have
     *                                  the required minimum size (6 correspondences).
     */
    public static PointCorrespondencePinholeCameraRobustEstimator create(
            final PinholeCameraRobustEstimatorListener listener, final PinholeCameraIntrinsicParameters intrinsic,
            final double[] qualityScores) {
<span class="fc" id="L1127">        return create(listener, intrinsic, qualityScores, DEFAULT_ROBUST_METHOD);</span>
    }

    /**
     * Creates a pinhole camera robust estimator based on point correspondences
     * and using provided listener, 2D/3D points, quality scores and default
     * robust estimator method + EPnP.
     *
     * @param listener      listener to be notified of events such as when estimation
     *                      starts, ends or its progress significantly changes.
     * @param intrinsic     intrinsic parameters of camera to be estimated.
     * @param points3D      list of 3D points used to estimate a pinhole camera.
     * @param points2D      list of corresponding projected 2D points used to
     *                      estimate a pinhole camera.
     * @param qualityScores quality scores corresponding to each pair of matched
     *                      points.
     * @return an instance of a pinhole camera robust estimator.
     * @throws IllegalArgumentException if provided lists of points and quality
     *                                  scores don't have the same size or their size is smaller than required
     *                                  minimum size (6 correspondences).
     */
    public static PointCorrespondencePinholeCameraRobustEstimator create(
            final PinholeCameraRobustEstimatorListener listener, final PinholeCameraIntrinsicParameters intrinsic,
            final List&lt;Point3D&gt; points3D, List&lt;Point2D&gt; points2D, final double[] qualityScores) {
<span class="fc" id="L1151">        return create(listener, intrinsic, points3D, points2D, qualityScores, DEFAULT_ROBUST_METHOD);</span>
    }

    /**
     * Creates a pinhole camera robust estimator based on point correspondences
     * and using default robust estimator method + UPnP.
     *
     * @param skewness                 skewness value of intrinsic parameters of camera to be
     *                                 estimated.
     * @param horizontalPrincipalPoint horizontal principal point value of
     *                                 intrinsic parameters of camera to be estimated.
     * @param verticalPrincipalPoint   vertical principal point value of
     *                                 intrinsic parameters of camera to be estimated.
     * @return an instance of a pinhole camera robust estimator.
     */
    public static PointCorrespondencePinholeCameraRobustEstimator create(
            final double skewness, final double horizontalPrincipalPoint, final double verticalPrincipalPoint) {
<span class="fc" id="L1168">        return create(skewness, horizontalPrincipalPoint, verticalPrincipalPoint, DEFAULT_ROBUST_METHOD);</span>
    }

    /**
     * Creates a pinhole camera robust estimator based on point correspondences
     * and using provided 2D/3D points and default robust estimator method +
     * EPnP.
     *
     * @param skewness                 skewness value of intrinsic parameters of camera to be
     *                                 estimated.
     * @param horizontalPrincipalPoint horizontal principal point value of
     *                                 intrinsic parameters of camera to be estimated.
     * @param verticalPrincipalPoint   vertical principal point value of
     *                                 intrinsic parameters of camera to be estimated.
     * @param points3D                 list of 3D points used to estimate a pinhole camera.
     * @param points2D                 list of corresponding projected 2D points used to
     *                                 estimate a pinhole camera.
     * @return an instance of a pinhole camera robust estimator.
     * @throws IllegalArgumentException if provided lists of points don't have
     *                                  the same size or their size is smaller than required minimum size
     *                                  (6 correspondences).
     */
    public static PointCorrespondencePinholeCameraRobustEstimator create(
            final double skewness, final double horizontalPrincipalPoint, final double verticalPrincipalPoint,
            final List&lt;Point3D&gt; points3D, final List&lt;Point2D&gt; points2D) {
<span class="fc" id="L1193">        return create(skewness, horizontalPrincipalPoint, verticalPrincipalPoint, points3D, points2D,</span>
                DEFAULT_ROBUST_METHOD);
    }

    /**
     * Creates a pinhole camera robust estimator based on point
     * correspondences and using provided listener and default robust estimator
     * method + EPnP.
     *
     * @param listener                 listener to be notified of events such as when estimation
     *                                 starts, ends or its progress significantly changes.
     * @param skewness                 skewness value of intrinsic parameters of camera to be
     *                                 estimated.
     * @param horizontalPrincipalPoint horizontal principal point value of
     *                                 intrinsic parameters of camera to be estimated.
     * @param verticalPrincipalPoint   vertical principal point value of
     *                                 intrinsic parameters of camera to be estimated.
     * @return an instance of a pinhole camera robust estimator.
     */
    public static PointCorrespondencePinholeCameraRobustEstimator create(
            final PinholeCameraRobustEstimatorListener listener, final double skewness,
            final double horizontalPrincipalPoint, final double verticalPrincipalPoint) {
<span class="fc" id="L1215">        return create(listener, skewness, horizontalPrincipalPoint, verticalPrincipalPoint, DEFAULT_ROBUST_METHOD);</span>
    }

    /**
     * Creates a pinhole camera robust estimator based on point correspondences
     * and using provided listener, 2D/3D points and default robust estimator
     * method + UPnP.
     *
     * @param listener                 listener to be notified of events such as when estimation
     *                                 starts, ends or its progress significantly changes.
     * @param skewness                 skewness value of intrinsic parameters of camera to be
     *                                 estimated.
     * @param horizontalPrincipalPoint horizontal principal point value of
     *                                 intrinsic parameters of camera to be estimated.
     * @param verticalPrincipalPoint   vertical principal point value of
     *                                 intrinsic parameters of camera to be estimated.
     * @param points3D                 list of 3D points used to estimate a pinhole camera.
     * @param points2D                 list of corresponding projected 2D points used to
     *                                 estimate a pinhole camera.
     * @return an instance of a pinhole camera robust estimator.
     * @throws IllegalArgumentException if provided lists of points don't have
     *                                  the same size or their size is smaller than required minimum size
     *                                  (6 correspondences).
     */
    public static PointCorrespondencePinholeCameraRobustEstimator create(
            final PinholeCameraRobustEstimatorListener listener, final double skewness,
            final double horizontalPrincipalPoint, final double verticalPrincipalPoint, final List&lt;Point3D&gt; points3D,
            final List&lt;Point2D&gt; points2D) {
<span class="fc" id="L1243">        return create(listener, skewness, horizontalPrincipalPoint, verticalPrincipalPoint, points3D, points2D,</span>
                DEFAULT_ROBUST_METHOD);
    }

    /**
     * Creates a pinhole camera robust estimator based on point correspondences
     * and using provided quality scores and default robust estimator method +
     * UPnP.
     *
     * @param skewness                 skewness value of intrinsic parameters of camera to be
     *                                 estimated.
     * @param horizontalPrincipalPoint horizontal principal point value of
     *                                 intrinsic parameters of camera to be estimated.
     * @param verticalPrincipalPoint   vertical principal point value of
     *                                 intrinsic parameters of camera to be estimated.
     * @param qualityScores            quality scores corresponding to each pair of matched
     *                                 points.
     * @return an instance of a pinhole camera robust estimator.
     * @throws IllegalArgumentException if provided quality scores length is
     *                                  smaller than required minimum size (6 samples).
     */
    public static PointCorrespondencePinholeCameraRobustEstimator create(
            final double skewness, final double horizontalPrincipalPoint, final double verticalPrincipalPoint,
            final double[] qualityScores) {
<span class="fc" id="L1267">        return create(skewness, horizontalPrincipalPoint, verticalPrincipalPoint, qualityScores, DEFAULT_ROBUST_METHOD);</span>
    }

    /**
     * Creates a pinhole camera robust estimator based on point correspondences
     * and using provided 2D/3D points, quality scores and default robust
     * estimator method + UPnP.
     *
     * @param skewness                 skewness value of intrinsic parameters of camera to be
     *                                 estimated.
     * @param horizontalPrincipalPoint horizontal principal point value of
     *                                 intrinsic parameters of camera to be estimated.
     * @param verticalPrincipalPoint   vertical principal point value of
     *                                 intrinsic parameters of camera to be estimated.
     * @param points3D                 list of 3D points used to estimate a pinhole camera.
     * @param points2D                 list of corresponding projected 2D points used to
     *                                 estimate a pinhole camera.
     * @param qualityScores            quality scores corresponding to each pair of matched
     *                                 points.
     * @return an instance of a pinhole camera robust estimator.
     * @throws IllegalArgumentException if provided lists of points and quality
     *                                  scores don't have the same size or their size is smaller than required
     *                                  minimum size (6 correspondences).
     */
    public static PointCorrespondencePinholeCameraRobustEstimator create(
            final double skewness, final double horizontalPrincipalPoint, final double verticalPrincipalPoint,
            final List&lt;Point3D&gt; points3D, final List&lt;Point2D&gt; points2D, final double[] qualityScores) {
<span class="fc" id="L1294">        return create(skewness, horizontalPrincipalPoint, verticalPrincipalPoint, points3D, points2D, qualityScores,</span>
                DEFAULT_ROBUST_METHOD);
    }

    /**
     * Creates a pinhole camera robust estimator based on point
     * correspondences and using provided listener, quality scores and default
     * robust estimator method + UPnP.
     *
     * @param listener                 listener to be notified of events such as when estimation
     *                                 starts, ends or its progress significantly changes.
     * @param skewness                 skewness value of intrinsic parameters of camera to be
     *                                 estimated.
     * @param horizontalPrincipalPoint horizontal principal point value of
     *                                 intrinsic parameters of camera to be estimated.
     * @param verticalPrincipalPoint   vertical principal point value of
     *                                 intrinsic parameters of camera to be estimated.
     * @param qualityScores            quality scores corresponding to each pair of matched
     *                                 points.
     * @return an instance of a pinhole camera robust estimator.
     * @throws IllegalArgumentException if provided quality scores don't have
     *                                  the required minimum size (6 correspondences).
     */
    public static PointCorrespondencePinholeCameraRobustEstimator create(
            final PinholeCameraRobustEstimatorListener listener, final double skewness,
            final double horizontalPrincipalPoint, final double verticalPrincipalPoint, final double[] qualityScores) {
<span class="fc" id="L1320">        return create(listener, skewness, horizontalPrincipalPoint, verticalPrincipalPoint, qualityScores,</span>
                DEFAULT_ROBUST_METHOD);
    }

    /**
     * Creates a pinhole camera robust estimator based on point correspondences
     * and using provided listener, 2D/3D points, quality scores and default
     * robust estimator method + UPnP.
     *
     * @param listener                 listener to be notified of events such as when estimation
     *                                 starts, ends or its progress significantly changes.
     * @param skewness                 skewness value of intrinsic parameters of camera to be
     *                                 estimated.
     * @param horizontalPrincipalPoint horizontal principal point value of
     *                                 intrinsic parameters of camera to be estimated.
     * @param verticalPrincipalPoint   vertical principal point value of
     *                                 intrinsic parameters of camera to be estimated.
     * @param points3D                 list of 3D points used to estimate a pinhole camera.
     * @param points2D                 list of corresponding projected 2D points used to
     *                                 estimate a pinhole camera.
     * @param qualityScores            quality scores corresponding to each pair of matched
     *                                 points.
     * @return an instance of a pinhole camera robust estimator.
     * @throws IllegalArgumentException if provided lists of points and quality
     *                                  scores don't have the same size or their size is smaller than required
     *                                  minimum size (6 correspondences).
     */
    public static PointCorrespondencePinholeCameraRobustEstimator create(
            final PinholeCameraRobustEstimatorListener listener, final double skewness,
            final double horizontalPrincipalPoint, final double verticalPrincipalPoint, final List&lt;Point3D&gt; points3D,
            final List&lt;Point2D&gt; points2D, final double[] qualityScores) {
<span class="fc" id="L1351">        return create(listener, skewness, horizontalPrincipalPoint, verticalPrincipalPoint, points3D, points2D,</span>
                qualityScores, DEFAULT_ROBUST_METHOD);
    }

    /**
     * Attempts to refine provided camera.
     *
     * @param pinholeCamera camera to be refined.
     * @param weight        weight for suggestion residual.
     * @return refined camera or provided camera if anything fails.
     */
    protected PinholeCamera attemptRefine(final PinholeCamera pinholeCamera, final double weight) {
<span class="fc bfc" id="L1363" title="All 4 branches covered.">        if (hasSuggestions() &amp;&amp; useFastRefinement) {</span>
<span class="fc" id="L1364">            return attemptFastRefine(pinholeCamera, weight);</span>
        } else {
<span class="fc" id="L1366">            return attemptSlowRefine(pinholeCamera, weight);</span>
        }
    }

    /**
     * Internal method to set lists of points to be used to estimate a pinhole
     * camera.
     * This method does not check whether estimator is locked or not.
     *
     * @param points3D list of 3D points used to estimate a pinhole camera.
     * @param points2D list of corresponding projected 2D points used to
     *                 estimate a pinhole camera.
     * @throws IllegalArgumentException if provided lists of points don't have
     *                                  the same size or their size is smaller than required minimum size (6
     *                                  points).
     */
    private void internalSetPoints(final List&lt;Point3D&gt; points3D, final List&lt;Point2D&gt; points2D) {
<span class="fc bfc" id="L1383" title="All 2 branches covered.">        if (points3D.size() &lt; MIN_NUMBER_OF_POINT_CORRESPONDENCES) {</span>
<span class="fc" id="L1384">            throw new IllegalArgumentException();</span>
        }
<span class="fc bfc" id="L1386" title="All 2 branches covered.">        if (points3D.size() != points2D.size()) {</span>
<span class="fc" id="L1387">            throw new IllegalArgumentException();</span>
        }
<span class="fc" id="L1389">        this.points3D = points3D;</span>
<span class="fc" id="L1390">        this.points2D = points2D;</span>
<span class="fc" id="L1391">    }</span>

    /**
     * Attempts to refine provided camera using a slow but more accurate and
     * stable algorithm by first doing a Powell optimization and then
     * obtaining covariance using Levenberg/Marquardt if needed.
     *
     * @param pinholeCamera camera to be refined.
     * @param weight        weight for suggestion residual.
     * @return refined camera or provided camera if anything fails.
     */
    private PinholeCamera attemptSlowRefine(final PinholeCamera pinholeCamera, final double weight) {
<span class="fc" id="L1403">        final var inliersData = getInliersData();</span>
<span class="pc bpc" id="L1404" title="1 of 6 branches missed.">        if ((refineResult || keepCovariance) &amp;&amp; inliersData != null) {</span>
<span class="fc" id="L1405">            final var refiner = new DecomposedPointCorrespondencePinholeCameraRefiner(pinholeCamera, keepCovariance,</span>
<span class="fc" id="L1406">                    inliersData, points3D, points2D, getRefinementStandardDeviation());</span>
            try {
<span class="pc bpc" id="L1408" title="1 of 2 branches missed.">                if (refineResult) {</span>
<span class="fc" id="L1409">                    refiner.setMinSuggestionWeight(weight);</span>
<span class="fc" id="L1410">                    refiner.setMaxSuggestionWeight(weight);</span>

<span class="fc" id="L1412">                    refiner.setSuggestSkewnessValueEnabled(suggestSkewnessValueEnabled);</span>
<span class="fc" id="L1413">                    refiner.setSuggestedSkewnessValue(suggestedSkewnessValue);</span>
<span class="fc" id="L1414">                    refiner.setSuggestHorizontalFocalLengthEnabled(suggestHorizontalFocalLengthEnabled);</span>
<span class="fc" id="L1415">                    refiner.setSuggestedHorizontalFocalLengthValue(suggestedHorizontalFocalLengthValue);</span>
<span class="fc" id="L1416">                    refiner.setSuggestVerticalFocalLengthEnabled(suggestVerticalFocalLengthEnabled);</span>
<span class="fc" id="L1417">                    refiner.setSuggestedVerticalFocalLengthValue(suggestedVerticalFocalLengthValue);</span>
<span class="fc" id="L1418">                    refiner.setSuggestAspectRatioEnabled(suggestAspectRatioEnabled);</span>
<span class="fc" id="L1419">                    refiner.setSuggestedAspectRatioValue(suggestedAspectRatioValue);</span>
<span class="fc" id="L1420">                    refiner.setSuggestPrincipalPointEnabled(suggestPrincipalPointEnabled);</span>
<span class="fc" id="L1421">                    refiner.setSuggestedPrincipalPointValue(suggestedPrincipalPointValue);</span>
<span class="fc" id="L1422">                    refiner.setSuggestRotationEnabled(suggestRotationEnabled);</span>
<span class="fc" id="L1423">                    refiner.setSuggestedRotationValue(suggestedRotationValue);</span>
<span class="fc" id="L1424">                    refiner.setSuggestCenterEnabled(suggestCenterEnabled);</span>
<span class="fc" id="L1425">                    refiner.setSuggestedCenterValue(suggestedCenterValue);</span>
                }

<span class="fc" id="L1428">                final var result = new PinholeCamera();</span>
<span class="fc" id="L1429">                final var improved = refiner.refine(result);</span>

<span class="fc bfc" id="L1431" title="All 2 branches covered.">                if (keepCovariance) {</span>
                    // keep covariance
<span class="fc" id="L1433">                    covariance = refiner.getCovariance();</span>
                }

<span class="fc bfc" id="L1436" title="All 2 branches covered.">                return improved ? result : pinholeCamera;</span>

<span class="fc" id="L1438">            } catch (final Exception e) {</span>
<span class="fc" id="L1439">                return pinholeCamera;</span>
            }
        } else {
<span class="fc" id="L1442">            covariance = null;</span>
<span class="fc" id="L1443">            return pinholeCamera;</span>
        }
    }

    /**
     * Attempts to refine provided camera using a fast algorithm based on
     * Levenberg/Marquardt.
     *
     * @param pinholeCamera camera to be refined.
     * @param weight        weight for suggestion residual.
     * @return refined camera or provided camera if anything fails.
     */
    private PinholeCamera attemptFastRefine(final PinholeCamera pinholeCamera, final double weight) {
<span class="fc" id="L1456">        final var inliersData = getInliersData();</span>
<span class="pc bpc" id="L1457" title="2 of 4 branches missed.">        if (refineResult &amp;&amp; inliersData != null) {</span>
<span class="fc" id="L1458">            final var refiner = new NonDecomposedPointCorrespondencePinholeCameraRefiner(pinholeCamera, keepCovariance,</span>
<span class="fc" id="L1459">                    inliersData, points3D, points2D, getRefinementStandardDeviation());</span>

            try {
<span class="fc" id="L1462">                refiner.setSuggestionErrorWeight(weight);</span>

<span class="fc" id="L1464">                refiner.setSuggestSkewnessValueEnabled(suggestSkewnessValueEnabled);</span>
<span class="fc" id="L1465">                refiner.setSuggestedSkewnessValue(suggestedSkewnessValue);</span>
<span class="fc" id="L1466">                refiner.setSuggestHorizontalFocalLengthEnabled(suggestHorizontalFocalLengthEnabled);</span>
<span class="fc" id="L1467">                refiner.setSuggestedHorizontalFocalLengthValue(suggestedHorizontalFocalLengthValue);</span>
<span class="fc" id="L1468">                refiner.setSuggestVerticalFocalLengthEnabled(suggestVerticalFocalLengthEnabled);</span>
<span class="fc" id="L1469">                refiner.setSuggestedVerticalFocalLengthValue(suggestedVerticalFocalLengthValue);</span>
<span class="fc" id="L1470">                refiner.setSuggestAspectRatioEnabled(suggestAspectRatioEnabled);</span>
<span class="fc" id="L1471">                refiner.setSuggestedAspectRatioValue(suggestedAspectRatioValue);</span>
<span class="fc" id="L1472">                refiner.setSuggestPrincipalPointEnabled(suggestPrincipalPointEnabled);</span>
<span class="fc" id="L1473">                refiner.setSuggestedPrincipalPointValue(suggestedPrincipalPointValue);</span>
<span class="fc" id="L1474">                refiner.setSuggestRotationEnabled(suggestRotationEnabled);</span>
<span class="fc" id="L1475">                refiner.setSuggestedRotationValue(suggestedRotationValue);</span>
<span class="fc" id="L1476">                refiner.setSuggestCenterEnabled(suggestCenterEnabled);</span>
<span class="fc" id="L1477">                refiner.setSuggestedCenterValue(suggestedCenterValue);</span>

<span class="fc" id="L1479">                final var result = new PinholeCamera();</span>
<span class="fc" id="L1480">                final var improved = refiner.refine(result);</span>

<span class="pc bpc" id="L1482" title="1 of 2 branches missed.">                if (keepCovariance) {</span>
                    // keep covariance
<span class="fc" id="L1484">                    covariance = refiner.getCovariance();</span>
                }

<span class="fc bfc" id="L1487" title="All 2 branches covered.">                return improved ? result : pinholeCamera;</span>
<span class="fc" id="L1488">            } catch (final Exception e) {</span>
                // refinement failed, so we return input value
<span class="fc" id="L1490">                return pinholeCamera;</span>
            }
        } else {
<span class="nc" id="L1493">            return pinholeCamera;</span>
        }
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.13.202504020838</span></div></body></html>